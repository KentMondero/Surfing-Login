<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cart | RTU Shop</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
@import url("https://fonts.googleapis.com/css2?family=League+Spartan:wght@100;200;300;400;500;600;700;800;900&display=swap");
* { margin:0; padding:0; box-sizing:border-box; font-family: 'League Spartan', sans-serif; }
body { background-image: url('Background.png'); background-size: cover; background-position: center; color: #111; padding: 40px 10%; }
h1 { text-align:center; font-size:3rem; margin-bottom:30px; color:#1a1a1a; }

/* Header / Navigation */
.header-nav { display:flex; justify-content:space-between; margin-bottom:20px; }
.header-nav a { text-decoration:none; background:#3950bf; color:#fff; padding:8px 16px; border-radius:6px; font-weight:600; transition:0.3s; }
.header-nav a:hover { background:#3147a3; }

/* Cart Table */
#cart-table { width:100%; border-collapse: separate; border-spacing:0 15px; }
#cart-table th { background:#3950bf; color:#fff; padding:12px; font-weight:700; border-radius:8px; text-align:center; }
#cart-table td { background:#fff; padding:12px; text-align:center; border-radius:8px; box-shadow:0 4px 8px rgba(0,0,0,0.05); vertical-align:middle; }
#cart-table td img { width:50px; border-radius:5px; }
#cart-table input[type=number] { width:60px; padding:6px 8px; border-radius:6px; border:1px solid #ccc; text-align:center; }
.remove-btn { background:#f44336; color:#fff; border:none; border-radius:5px; padding:6px 12px; cursor:pointer; transition:0.2s; }
.remove-btn:hover { background:#d32f2f; }

.cart-total { text-align:right; font-size:1.8rem; font-weight:700; margin-top:20px; color:#210fc2; }

.checkout-btn, .select-all-btn {
    display:inline-block; background:#fac305; color:#111; padding:10px 16px; border:none; border-radius:8px; font-size:1.1rem; font-weight:700; cursor:pointer; transition:0.3s; margin-top:10px;
}
.checkout-btn:hover, .select-all-btn:hover { background:#e6b800; }

/* Modal */
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; }
.modal-content { background:#fff; padding:20px; display:flex; max-width:700px; width:90%; border-radius:10px; }
.modal-left { flex:1; }
.modal-left img { width:100%; border-radius:5px; }
#modal-thumbs img { width:50px; margin:5px; cursor:pointer; border:1px solid #ccc; border-radius:4px; }
.modal-right { flex:1; padding-left:20px; display:flex; flex-direction:column; justify-content:space-between; }
.modal-close { position:absolute; top:10px; right:20px; font-size:30px; cursor:pointer; color:#fff; }

/* Checkout Popup */
.checkout-popup {
    position: fixed; top:50%; left:50%; transform: translate(-50%, -50%); background: #fff; padding: 25px 40px; border-radius:10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align:center; z-index:10000; display:none;
}
.checkout-popup h3 { margin-bottom:15px; font-size:1.4rem; color:#424dc0; }
.checkout-popup button { padding:8px 20px; background:#fac305; border:none; border-radius:6px; font-weight:600; cursor:pointer; transition:0.3s; }
.checkout-popup button:hover { background:#e6b800; }

/* Responsive */
@media screen and (max-width:768px){
  body{padding:20px;}
  #cart-table td, #cart-table th{font-size:14px; padding:10px;}
  #cart-table td img{width:40px;}
  .checkout-btn, .select-all-btn{width:100%; margin-bottom:10px;}
  .header-nav { flex-direction:column; gap:10px; margin-bottom:20px;}
}

.copyright {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 15px 0; /* adds height so vertical centering is visible */
}

</style>
</head>
<body>

<h1>Your Cart</h1>

<div class="header-nav">
  <a href="index.html"><i class="fas fa-home"></i> Home</a>
  <a href="shop.html"><i class="fas fa-arrow-left"></i> Back to Products</a>
</div>

<button class="select-all-btn" onclick="toggleSelectAll(true)">Select All</button>
<button class="select-all-btn" onclick="toggleSelectAll(false)">Unselect All</button>

<table id="cart-table">
  <thead>
    <tr>
      <th>Buy Today</th>
      <th>Image</th>
      <th>Product</th>
      <th>Qty</th>
      <th>Price</th>
      <th>Amount</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<div class="cart-total">
  Total: ₱<span id="cart-total">0.00</span>
</div>

<button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>

<!-- Checkout Popup -->
<div class="checkout-popup" id="checkoutPopup">
  <h3 id="popupMessage"></h3>
  <button onclick="closePopup()">OK</button>
</div>

<!-- Product Modal -->
<div id="product-modal" class="modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal()">&times;</span>
    <div class="modal-left">
      <img id="modal-main-img" src="">
      <div id="modal-thumbs"></div>
    </div>
    <div class="modal-right">
      <h3 id="modal-name"></h3>
      <p id="modal-rtu"></p>
      <p id="modal-price"></p>
      <label>Quantity:</label>
      <input type="number" id="modal-qty" value="1" min="1">
      <button id="modal-add-cart">Add to Cart</button>
    </div>
  </div>
</div>

<script>
// -------------------- Cart Logic --------------------
let cart = [];
let total = 0;

// Load/save cart
function loadCart(){ const data=localStorage.getItem('cart'); if(data) cart=JSON.parse(data); renderCart(); }
function saveCart(){ localStorage.setItem('cart', JSON.stringify(cart)); }

// Get product detail for options
function getDisplayDetail(item){
  return item.size ? `[Size: ${item.size}]` : item.color ? `[Color: ${item.color}]` : item.type ? `[Type: ${item.type}]` : item.style ? `[Style: ${item.style}]` : '';
}

// Add from modal
function addToCartFromModal(item){
  if(!item.qty) item.qty=1;
  const existing = cart.find(i => i.id===item.id && getDisplayDetail(i)===getDisplayDetail(item));
  if(existing) existing.qty+=item.qty; else cart.push(item);
  saveCart(); renderCart(); showPopup(`${item.name} added to cart!`);
}

// Remove
function removeFromCart(id, detail){ cart=cart.filter(i=>!(i.id===id && getDisplayDetail(i)===detail)); saveCart(); renderCart(); }

// Update quantity
function updateQty(id, qty, detail){
  const item=cart.find(i=>i.id===id && getDisplayDetail(i)===detail);
  if(item){ item.qty=qty; if(item.qty<=0) removeFromCart(id, detail);}
  saveCart(); renderCart();
}

// Render cart
function renderCart(){
  const tbody=document.querySelector('#cart-table tbody'); tbody.innerHTML='';
  total=0;
  cart.forEach(item=>{
    const amount=item.price*item.qty;
    const detail=getDisplayDetail(item);
    const row=document.createElement('tr');
    row.innerHTML=`<td><input type="checkbox" class="buy-today" onchange="updateTotal()"></td>
      <td><img src="${item.image}" alt="${item.name}"></td>
      <td>${item.name} ${detail}</td>
      <td><input type="number" min="1" value="${item.qty}" onchange="updateQty('${item.id}', parseInt(this.value), '${detail}')"></td>
      <td>₱${item.price.toFixed(2)}</td>
      <td>₱<span class="item-amount">${amount.toFixed(2)}</span></td>
      <td><button class="remove-btn" onclick="removeFromCart('${item.id}', '${detail}')"><i class="fas fa-trash"></i></button></td>`;
    tbody.appendChild(row);
  });
  updateTotal();
}

// Update total
function updateTotal(){ total=0; document.querySelectorAll('#cart-table tbody tr').forEach(row=>{
  if(row.querySelector('.buy-today').checked) total+=parseFloat(row.querySelector('.item-amount').textContent);
}); document.getElementById('cart-total').textContent=total.toFixed(2); }

// Checkout
function checkout(){
  if(total===0){ showPopup("Please select items to buy today!"); return; }
  showPopup("Checkout successful! Total: ₱"+total.toFixed(2));
  document.querySelectorAll('#cart-table tbody tr').forEach((row,i)=>{ if(row.querySelector('.buy-today').checked) cart.splice(i,1); });
  saveCart(); renderCart();
}

// Select/unselect all
function toggleSelectAll(value){ document.querySelectorAll('.buy-today').forEach(cb=>cb.checked=value); updateTotal(); }

// Popup
function showPopup(msg){ document.getElementById('popupMessage').textContent=msg; document.getElementById('checkoutPopup').style.display='block'; }
function closePopup(){ document.getElementById('checkoutPopup').style.display='none'; }

window.onload=loadCart;

// -------------------- Modal Logic --------------------
let currentProduct={};
function openModal(item){
  currentProduct={...item};
  document.getElementById('modal-main-img').src=item.images[0];
  document.getElementById('modal-thumbs').innerHTML=item.images.map(src=>`<img src="${src}" onclick="document.getElementById('modal-main-img').src='${src}'">`).join('');
  document.getElementById('modal-name').textContent=item.name;
  document.getElementById('modal-rtu').textContent=item.rtu || '';
  document.getElementById('modal-price').textContent=`₱${item.price.toFixed(2)}`;
  document.getElementById('modal-qty').value=1;
  document.getElementById('product-modal').style.display='flex';
}
function closeModal(){ document.getElementById('product-modal').style.display='none'; }
document.getElementById('modal-add-cart').addEventListener('click',()=>{
  const qty=parseInt(document.getElementById('modal-qty').value);
  currentProduct.qty=qty;
  addToCartFromModal(currentProduct);
  closeModal();
});
</script>

<div class="copyright">
        <p>© 2025, Surfing | Ecommerce Website</p>
    </div>

</body>
</html>
